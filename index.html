<HTML>
<head>

 <meta charset="UTF-8">
  <meta name="description" content="Bridge Flashcards">
  <meta name="keywords" content="Bridge">
  <meta name="author" content="Colin Houghton" >

<!-- The following viewport which will give the browser instructions on how to control the page's dimensions and scaling. -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="shortcut icon" href="#">


<link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />

<style>

a, a:link, a:visited, a:focus,  a:hover, a:active{
  color: green;
  background-color: #ff6;
  text-decoration:none; 
 
}


a:hover{
  color: green;
  background-color: #ff6;
  text-decoration:none; 
 
}
* {
  box-sizing: border-box;
}

body {
  font-family: Arial, Helvetica, sans-serif;
 font-size: 16px;
}

input[type='radio'] { 
     transform: scale(2); 
     width: 30 px;
 }
 
 

/* Style the list inside the menu */
nav ul {
  list-style-type: none;
  padding: 0;
}


.correctCheck {
  display: inline-block;
  height: 20px;

}

/* Style the header */
#noteID {
 
  padding: 30px;
  font-size: 24px;
  color: white;
  width: 100%;
}






#cards {

 // height: 340px; /* only for demonstration, should be removed */
//    width: 100%;
    display: inline;
}

.deck {
 
   width: 350px
}



.card {
   height: 220px;
}





/* Create two columns/boxes that floats next to each other */
#deck {
  float: left;
  background: #007D3B;
  max-height: 300px;
  20px 0px 0px 20px;
    grid-column-start: 1;
  grid-column-end: 1;
 }  
 
 
 @media only screen and (max-width: 1024px) {
  #noteID {
    font-size: 16px;
  }
}



 @media only screen and (max-width: 1024px) {
  #deck {
    display: none;
  }
}


 @media only screen and (min-width: 1024px) {
  #deck {
    display: block;
  }
}







#randomButton {
 font-size: 24px;
  float: left;
  background-color:#007D3B;
  color: gold;
  
}



 @media only screen and (max-width: 1024px) {

  #randomButton {
           font-size: 20px;
    }
    
      #randomButton2 {
           font-size: 20px;
    }
    
}


#NextExButton{
 font-size: 24px;
  background-color:#007D3B;
  color: gold;
  
}
 
 
 #randomExButton{
 font-size: 24px;
  background-color:#007D3B;
  color: gold;
  
}
 
  #checkAnswersButton{
 font-size: 24px;
  background-color:#007D3B;
  color: gold; 
  margin-bottom:10px; 
  margin-top:10px; 
  width:100%" 
 }
 
 
 #randomButtonDiv{
  display: inline-block;
  float: left;
  vertical-align: middle;
  margin-right:10px;

}
 
 .divDeckTable {
    display: table;
}

.innerDivDeckTable {
    display: table-cell;
    vertical-align: middle;
    text-align: center;
    //  height: 615px; /* purely for demonstration */
 //   padding-right: 20px;
 //   padding-top: 60px;
}


#dealt {
  float: left;
  background: #007D3B;
  padding: 20px;
  height: 575pxpx;
//  min-width: 575px;

}




.grid-container {
  display: grid;
  grid-template-columns: auto auto auto auto auto;
  gap: 0px;
  background-color: #44AA05;
  padding: 10px;
  height: 420px
}

.grid-container > div {
  padding: 10px 0;
  font-size: 20px;
}


#replaceLevel{
   display: inline-block;
}

#replaceSuit{
   display: inline-block;
}

#spades{

  grid-column-start: 2;
  grid-column-end: 2;
  max-width: 180px;
  text-align:center;
  padding-right:5px;

}


#hearts{

  grid-column-start: 3;
  grid-column-end: 3;
    max-width: 180px;
  text-align:center;
   padding-right:5px;

}

#diamonds{

  grid-column-start: 4;
  grid-column-end: 4;
    max-width: 180px;
  text-align:center;
 
  object-fit: cover;
    padding-right:5px;
}


#clubs{

  grid-column-start: 5;
  grid-column-end: 5;
  max-width: 180px;
  text-align:center;
 
}



#cardPos1 {
  grid-column-start: 1;
  grid-column-end: 1;
  max-width:100%;
  
}

#cardPos2 {
  grid-column-start: 1;
  grid-column-end: 1;
    position: relative;
  z-index: 2;
  top: -170px;
  max-width:100%;
}

#cardPos3 {
  grid-column-start: 1;
  grid-column-end: 1;
    position: relative;
  z-index: 3;
  top: -340px;
  max-width:100%;

}

#cardPos4 {
  grid-column-start: 1;
  grid-column-end: 1;
    position: relative;
  z-index: 4;
  top: -510px;
  max-width:100%;
}

#cardPos5 {
  grid-column-start: 1;
  grid-column-end: 1;
    position: relative;
  z-index: 5;
  top: -680px;
  max-width:100%;
}

#cardPos6 {
  grid-column-start: 1;
  grid-column-end: 1;
    position: relative;
  z-index: 6;
  top: -850px;
  max-width:100%;
}


#cardPos7 {
  grid-column-start: 1;
  grid-column-end: 1;
    position: relative;
  z-index: 7;
  top: -1020px;
  max-width:100%;
}

#cardPos8 {
  grid-column-start: 1;
  grid-column-end: 1;
    position: relative;
  z-index: 8;
  top: -1190px;
  max-width:100%;
}

#cardPos9 {
  grid-column-start: 1;
  grid-column-end: 1;
    position: relative;
  z-index: 9;
  top: -1360px;
  max-width:100%;
}

#cardPos10 {
  grid-column-start: 1;
  grid-column-end: 1;
    position: relative;
  z-index: 10;
  top: -1530px;
  max-width:100%;
}


#cardPos11 {
  grid-column-start: 1;
  grid-column-end: 1;
    position: relative;
  z-index: 11;
  top: -1700px;
  max-width:100%;
}


#cardPos12 {
  grid-column-start: 1;
  grid-column-end: 1;
    position: relative;
  z-index: 12;
  top: -1870px;
  max-width:100%;
}


#cardPos13 {
  grid-column-start: 1;
  grid-column-end: 1;
    position: relative;
  z-index: 13;
  top: -2040px;
  max-width:100%;
}


 @media only screen and (max-width: 800px) {
#dealt {

  padding: 10px;

}

}



 @media only screen and (max-width: 800px) {
  #cardPos1 {
      height: 170px;
  }
  
   #cardPos2 {
       height: 170px;
       top: -137px;
   }
   
   #cardPos3 {
      height: 170px;
       top: -274px;
   }   
   
 #cardPos4 {
      height: 170px;
       top: -411px;

}

#cardPos5 {
      height: 170px;
  top: -548px;

}

#cardPos6 {
      height: 170px;
  top: -685px;

}
#cardPos7 {
      height: 170px;
  top: -822px;

}
#cardPos8 {
      height: 170px;
  top: -959px;

}

#cardPos9 {
      height: 170px;
  top: -1096px;

}
#cardPos10 {
      height: 170px;
  top: -1233px;

}
#cardPos11 {
      height: 170px;
  top: -1370px;

}
#cardPos12 {
      height: 170px;
  top: -1507px;

}
#cardPos13 {
      height: 170px;
  top: -1644px;

}

}


 @media only screen and (max-width: 501px) {
#dealt {

  padding: 5px;

}

}



 @media only screen and (max-width: 501px) {
  #cardPos1 {
      height: 140px;
  }
  
   #cardPos2 {
      height: 140px;
       top: -110px;
   }
   
   #cardPos3 {
      height: 140px;
       top: -220px;
   }   
   
 #cardPos4 {
      height: 140px;
       top: -330px;

}

#cardPos5 {
      height: 140px;
  top: -440px;

}

#cardPos6 {
      height: 140px;
  top: -550px;

}
#cardPos7 {
      height: 140px;
  top: -660px;

}
#cardPos8 {
      height: 140px;
  top: -770px;

}

#cardPos9 {
      height: 140px;
  top: -880px;

}
#cardPos10 {
      height: 140px;
  top: -990px;

}
#cardPos11 {
      height: 140px;
  top: -1100px;

}
#cardPos12 {
      height: 140px;
  top: -1210px;

}
#cardPos13 {
      height: 140px;
  top: -1320px;

}

}



#bids {
  font-family: Arial, Helvetica, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

#bids td, #bids th {
  border: 1px solid #ddd;
  padding: 8px;
}

#bids tr:nth-child(even){background-color: #f2f2f2;}

#bids tr:hover {background-color: #ddd;}

#bids  {width: auto;}

#bids th {
  padding: 12px;
  text-align: left;
  background-color: #04AA6D;
  color: white;
  text-align:center;
}
/* Clear floats after the columns */
#questions{

  clear: both;
}

/* Style the footer */
footer {
  background-color: #777;
  padding: 10px;
  text-align: center;
  color: white;
}

/* Responsive layout - makes the two columns/boxes stack on top of each other instead of next to each other, on small screens */
@media (max-width: 600px) {
  nav, article {
    width: 100%;
    height: auto;
  }
}
</style>

<!--  was 3.6.0  -->
<!-- Get the Jquery code -->
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
<!-- Get the Jquery UI code -->
<script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js" integrity="sha256-6XMVI0zB8cRzfZjqKcD01PBsAy3FlDASrlC8SxCpInY=" crossorigin="anonymous"></script>

<script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.js" integrity="sha256-1PYCpx/EXA36KN1NKrK7auaTylVyk01D98R7Ccf04Bc=" crossorigin="anonymous"></script>
 
 
 <!--  was 2.2.0  -->
<!-- NOt sure how this is used yet, but here is the jquery color code -->
<script src="https://code.jquery.com/color/jquery.color-2.2.0.js" integrity="sha256-gvMJWDHjgDrVSiN6eBI9h7dRfQmsTTsGU/eTT8vpzNg=" crossorigin="anonymous"></script>

<!-- This is the jquery mobile code .... leave it out for now 
<script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>

-->


<script language="javascript" type="text/javascript">

// Global variables - globals

var NotesObject = {}; // a global object to hold the XML

 var xmlDoc ={};
  var $xml = {};

 //var  hcp= "";
 // var  distribution= "";
  //  var  dummyPoints= "";
 // var  balancedHand= "";
  
  
//var nextBidPosition = "";
// var nextBidLevel = "";
// var nextBidSuit= "";
 
//var explanation = "";

//var explanationPart1 = "";
//var explanationPart2 = "";
//var explanationPart3 = "";

//nextBidSuitShouldBe= "";
//nextBidLevelShouldBe= "";


   var imagePath =  "images/";

     var          incorrectCount = 0;
      var         correctCount = 0;
       var        playedCount = 0;
       
       var selectedNote = 0;
</script>

<!-- The document.ready ensures that the script will not run until the entire document is loaded.  A simpler syntax might show as $(function(){  -->

<script language="javascript" type="text/javascript">




function displayAjaxError(XMLHttpRequest, textStatus, errorThrown){

  alert('Sorry, there was an error reading the xml notes file.  Check the filename and try again.  Error message = ' + errorThrown );
}



function createNotesXml(xml) {            // this function is called up on the successful return of the Ajax call for the xml file that contains the node data (ie: employees or positions )

    // alert(' 687 XML successfull.  CreateNotesXml module running');

       NotesObject = xml;         // this is the globalv that contains all the XML from the file that we will continue to parse as needed to get notes and chords
       parseXmlForNotes();           // now that the ajax call to get the xml has been read and we put the results in our global object, lets go fill in the notes picklist

 }         // end of createNotesXml function       
       
       
function dealTheCards(spades,hearts,diamonds,clubs){


 // alert('the spades passed to deal the cards is ' + spades);

// erase the card images from the display
               
   //       alert( "The width of the window is " + $(window).width()   )
          
          

var longestSuitLength = 0;
var suitArray = spades.split(',')
var arrayLength = suitArray.length;

longestSuitLength = arrayLength;


var cardImage = "seeThrough.png";
var cardPosition = 0;
var relativeFolder = "images/playingCards/PNG-cards-1.3/";
var suit = 'spades';

var rotateDegrees = 0;


for (var i = 0; i < arrayLength; i++) {

       cardPosition++;

 
       if(suitArray[i].trim()=='A'){  cardImage="ace_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='K'){  cardImage="king_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='Q'){  cardImage="queen_of_"+suit+".png"} ;
       if(suitArray[i].trim()=='J'){  cardImage="jack_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='10'){  cardImage="10_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='9'){  cardImage="9_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='8'){  cardImage="8_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='7'){  cardImage="7_of_"+suit+".png"} ;
       if(suitArray[i].trim()=='6'){  cardImage="6_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='5'){  cardImage="5_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='4'){  cardImage="4_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='3'){  cardImage="3_of_"+suit+".png"} ;
       if(suitArray[i].trim()=='2'){  cardImage="2_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='1'){  cardImage="1_of_"+suit+".png"}    ;
       
       //      var imagePositionID = "cardPos" + cardPosition;
       //      var p = $( 'imagePositionID ').position();
             
             var p =  $("spades:eq("+cardPosition+")");
             
       
         const el = document.getElementById("spades");
       
         var rect = el.getBoundingClientRect();
         
         const dealStart= document.getElementById("deckCard");
         var rectFrom = dealStart.getBoundingClientRect();
         
   //       console.log("dealing spades"  );
          
        if(cardPosition > 1){
             rotateDegrees = Math.floor((Math.random() * 10) - 5)    // randomly select the next note into the global varibale
       }
          

          if ($(window).width() < 1024) {
                 rotateDegrees = 0;
          }
          
          
              //    console.log('dealing the card ' + cardImage );
                  
                  
         deal1Card(rectFrom.top, rectFrom.left, rect.top + 10 , rect.left + 10 , suit, cardPosition, cardImage, rotateDegrees,longestSuitLength );
 
 
      // if(cardPosition > 1){
      // rotateDegrees = Math.floor((Math.random() * 10) - 5)    // randomly select the next note into the global varibale
     //  }
    //  $('#spades').append('<img style="transform: rotate('+rotateDegrees+'deg)"id="cardPos'+ cardPosition +'"  class="card" src="'+relativeFolder+cardImage+'" ></img>' );


}   // end for loop
      
 

       
       
  length = hearts.length;   
   if(length>0){

      
var suitArray = hearts.split(',')
var arrayLength = suitArray.length;
var cardImage = "seeThrough.png";
var cardPosition = 0;
var relativeFolder = "images/playingCards/PNG-cards-1.3/";
var suit = 'hearts'

longestSuitLength = Math.max(longestSuitLength, arrayLength)   ;
rotateDegrees = 0;
for (var i = 0; i < arrayLength; i++) {

       cardPosition++;
       if(suitArray[i].trim()=='A'){  cardImage="ace_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='K'){  cardImage="king_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='Q'){  cardImage="queen_of_"+suit+".png"} ;
       if(suitArray[i].trim()=='J'){  cardImage="jack_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='10'){  cardImage="10_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='9'){  cardImage="9_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='8'){  cardImage="8_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='7'){  cardImage="7_of_"+suit+".png"} ;
       if(suitArray[i].trim()=='6'){  cardImage="6_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='5'){  cardImage="5_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='4'){  cardImage="4_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='3'){  cardImage="3_of_"+suit+".png"} ;
       if(suitArray[i].trim()=='2'){  cardImage="2_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='1'){  cardImage="1_of_"+suit+".png"}    ;
       
       
              const el = document.getElementById("hearts");
         var rect = el.getBoundingClientRect();
         const dealStart= document.getElementById("deckCard");
         var rectFrom = dealStart.getBoundingClientRect();
         
  //          console.log("target for hearts is   " + rect.top  + " and from Left " + rect.left);
         
       if(cardPosition > 1){
       rotateDegrees = Math.floor((Math.random() * 10) - 5)    // randomly select the next note into the global varibale
       }
       
                 
          if ($(window).width() < 1024) {
                 rotateDegrees = 0;
          }
       
                deal1Card(rectFrom.top, rectFrom.left, rect.top + 10 , rect.left + 10 , suit, cardPosition, cardImage, rotateDegrees,longestSuitLength );
       
       
    //  $('#hearts').append('<img style="transform: rotate('+rotateDegrees+'deg)"id="cardPos'+ cardPosition +'"  class="card" src="'+relativeFolder+cardImage+'" ></img>' );
}
                  }      // end if there are any of this suit (length > 0 )  
       
       
      length = diamonds.length;   
    if(length>0){         
var suitArray = diamonds.split(',')
var arrayLength = suitArray.length;
var cardImage = "seeThrough.png";
var cardPosition = 0;
var relativeFolder = "images/playingCards/PNG-cards-1.3/";
var suit = 'diamonds'

longestSuitLength = Math.max(longestSuitLength, arrayLength)   ;
rotateDegrees = 0;
for (var i = 0; i < arrayLength; i++) {

       cardPosition++;
       if(suitArray[i].trim()=='A'){  cardImage="ace_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='K'){  cardImage="king_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='Q'){  cardImage="queen_of_"+suit+".png"} ;
       if(suitArray[i].trim()=='J'){  cardImage="jack_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='10'){  cardImage="10_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='9'){  cardImage="9_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='8'){  cardImage="8_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='7'){  cardImage="7_of_"+suit+".png"} ;
       if(suitArray[i].trim()=='6'){  cardImage="6_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='5'){  cardImage="5_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='4'){  cardImage="4_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='3'){  cardImage="3_of_"+suit+".png"} ;
       if(suitArray[i].trim()=='2'){  cardImage="2_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='1'){  cardImage="1_of_"+suit+".png"}    ;
       
         const el = document.getElementById("diamonds");
         var rect = el.getBoundingClientRect();
         const dealStart= document.getElementById("deckCard");
         var rectFrom = dealStart.getBoundingClientRect();
       
       
      //     console.log("target for diamonds is   " + rect.top  + " and from Left " + rect.left);
           
           
       if(cardPosition > 1){
       rotateDegrees = Math.floor((Math.random() * 10) - 5)    // randomly select the next note into the global varibale
       }
                
          if ($(window).width() < 1024) {
                 rotateDegrees = 0;
          }
                deal1Card(rectFrom.top, rectFrom.left, rect.top + 10 , rect.left + 10 , suit, cardPosition, cardImage, rotateDegrees,longestSuitLength );
                
                
    //  $('#diamonds').append('<img style="transform: rotate('+rotateDegrees+'deg)"id="cardPos'+ cardPosition +'"  class="card" src="'+relativeFolder+cardImage+'" ></img>' );
}
             
             }      // end if there are any of this suit (length > 0 )  
    
    
      length = clubs.length;   
    if(length>0){             
    
    var suitArray = clubs.split(',')
var arrayLength = suitArray.length;
var cardImage = "seeThrough.png";
var cardPosition = 0;
var relativeFolder = "images/playingCards/PNG-cards-1.3/";
var suit = 'clubs';
longestSuitLength = Math.max(longestSuitLength, arrayLength)   ;
rotateDegrees = 0;
 
for (var i = 0; i < arrayLength; i++) {

       cardPosition++;
       if(suitArray[i].trim()=='A'){  cardImage="ace_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='K'){  cardImage="king_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='Q'){  cardImage="queen_of_"+suit+".png"} ;
       if(suitArray[i].trim()=='J'){  cardImage="jack_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='10'){  cardImage="10_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='9'){  cardImage="9_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='8'){  cardImage="8_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='7'){  cardImage="7_of_"+suit+".png"} ;
       if(suitArray[i].trim()=='6'){  cardImage="6_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='5'){  cardImage="5_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='4'){  cardImage="4_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='3'){  cardImage="3_of_"+suit+".png"} ;
       if(suitArray[i].trim()=='2'){  cardImage="2_of_"+suit+".png"}    ;
       if(suitArray[i].trim()=='1'){  cardImage="1_of_"+suit+".png"}    ;
       
         const el = document.getElementById("clubs");
         var rect = el.getBoundingClientRect();
         
         const dealStart= document.getElementById("deckCard");
         var rectFrom = dealStart.getBoundingClientRect();
       
       
           //       console.log("target for clubs is   " + rect.top  + " and from Left " + rect.left);
           
           //        alert("target for clubs is   " + rect.top  + " and from Left " + rect.left);
           
          if(cardPosition > 1){
       rotateDegrees = Math.floor((Math.random() * 10) - 5)    // randomly select the next note into the global varibale
       }
                if ($(window).width() < 1024) {
                 rotateDegrees = 0;
          }
                deal1Card(rectFrom.top, rectFrom.left, rect.top + 10 , rect.left + 10 , suit, cardPosition, cardImage, rotateDegrees,longestSuitLength );
                
                
    //  $('#clubs').append('<img style="transform: rotate('+rotateDegrees+'deg)"id="cardPos'+ cardPosition +'"  class="card" src="'+relativeFolder+cardImage+'" ></img>' );
}
            
                   }      // end if there are any of this suit (length > 0 )  
          var cardHeight = 200;
          
       									if(longestSuitLength<9)   { 
       									   //   $('.card').css('height','220');  
       									}  
                                 else {
                                     //         	$('.card').css('height','200');
                                  } ; 


/*
         $(".card").each(function () {                            // this will run with each new deal of the cards, making the cards look better (bigger) ) if they will fit on the table.
                  $(this).css("height", cardHeight );
           });
    
    */
    
    // adjust the card table height to match the number/distribution of cards so that the answers show as high as possible on mobile apps
    
//    var screensize = document.documentElement.clientHeight;
//if (screensize  < 900) {

    cardHeight = 220;
 //    $('.card').css('height','220');      // this becomes the new default after the initial full deck is shown before any notes / chords are selected.
 
    if(longestSuitLength==4)   { $('.grid-container').css('height','420'); }       
    if(longestSuitLength==5)   { $('.grid-container').css('height','470'); }    
    if(longestSuitLength==6)   { $('.grid-container').css('height','520'); }     // most example hands will have 6 cards or less
    if(longestSuitLength==7)   { $('.grid-container').css('height','570'); }     // some might have 7 
    if(longestSuitLength>7)      { $('.grid-container').css('height','670'); }        // smaller cards.   This will likely never happen.

/*
  var counter = 1;
         $(".card").each(function () {                            // this will run with each new deal of the cards, making the cards look better (bigger) ) if they will fit on the table.
         counter++; 
            console.log ( "setting the card height "  + counter) ;
                  $(this).css("height", cardHeight );
           });
           
           */

 // alert('longest length is ' + longestSuitLength )
 
 

    $('html, body').animate({
        scrollTop: $("#dealt").offset().top
    }, 1000);




       
       }   // end of function dealTheCards
    
    
    /***************************/     
       
function deal1Card(fromTop,fromLeft, top,left, suit, cardPosition, cardImage, rotateDegrees, longestSuitLength ){  

//  if(isMobile){return};     // no animation if mobile because not enough room for the deck

 var relativeFolder = "images/playingCards/PNG-cards-1.3/";
 var cardHeight = 200;
 
var deckDisplayed =  $('#deck').css("display");


// console.log ( "the deck dispalyed is " + deckDisplayed  + " and the relative folder is " + relativeFolder ) ;

if(deckDisplayed == "none"){

     $("#" + suit).append('<img style="transform: rotate('+rotateDegrees+'deg)"  id="cardPos'+cardPosition+'"  class="card" src="'+relativeFolder+cardImage+'" ></img>' );
     
     $("#" + suit + " .placeholder").remove();
     
     return;
}


 


        var animateSpeed = 125;      // this is how fast the cards move across the  board
 
       var cardDiv = $("#animateCardDiv");
       cardDiv.animate({left: fromLeft, top: fromTop}, 1);      // move the card to the beginning as fast as possible.
      cardDiv.animate({opacity: 1.0}, "fast");              // show the card   
                 
 //  console.log("moving the card to  " + top + " and from Left " + left);
      
      
          if(suit == "spades"){    
                  cardDiv.animate({left: left, top:top},  animateSpeed, function() {
 
   
 
                   $('#spades').append('<img style="transform: rotate('+rotateDegrees+'deg)"  id="cardPos'+cardPosition+'"  class="card" src="'+relativeFolder+cardImage+'" ></img>' );
                   
                                   $('#spades .placeholder').remove();
                              
       									if(longestSuitLength<9)   { 
       									    //  $('.card').css('height','220');  
       									}  
                                 else {
                                     //         	$('.card').css('height','200');
                                  } ;   

/*

         										 $(".card").each(function () {                            // this will run with each new deal of the cards, making the cards look better (bigger) ) if they will fit on the table.
                 								 $(this).css("height", cardHeight );
           						        });
           						        */
       // Animation complete.
       
        //      cardDiv.animate({left: fromLeft, top: fromTop}, 1);      // move the card to the beginning as fast as possible.
  });
      
      
      }
                if(suit == "hearts"){    
                    cardDiv.animate({left: left, top:top},  animateSpeed, function() {

                   $('#hearts').append('<img style="transform: rotate('+rotateDegrees+'deg)"  id="cardPos'+cardPosition+'"  class="card" src="'+relativeFolder+cardImage+'" ></img>' );
               
                            $('#hearts .placeholder').remove();
       									if(longestSuitLength<9)   { 
       									    //  $('.card').css('height','220');  
       									}  
                                 else {
                                     //         	$('.card').css('height','200');
                                  } ;  


/*

         										 $(".card").each(function () {                            // this will run with each new deal of the cards, making the cards look better (bigger) ) if they will fit on the table.
                 								 $(this).css("height", cardHeight );
           						        });
           						        */
                //  alert("new card there?")
       // Animation complete.
  });
    
   //   $('#spades').append('<img style="transform: rotate('+rotateDegrees+'deg)"id="cardPos'+ cardPosition +'"  class="card" src="'+relativeFolder+cardImage+'" ></img>' );
    
    
    }


                if(suit == "diamonds"){    
      cardDiv.animate({left: left, top:top},  animateSpeed, function() {

     
                   $('#diamonds').append('<img style="transform: rotate('+rotateDegrees+'deg)"  id="cardPos'+cardPosition+'"  class="card" src="'+relativeFolder+cardImage+'" ></img>' );
                   
                             $('#diamonds .placeholder').remove();	
       									if(longestSuitLength<9)   { 
       									    //  $('.card').css('height','220');  
       									}  
                                 else {
                                     //         	$('.card').css('height','200');
                                  } ; 


/*

         										 $(".card").each(function () {                            // this will run with each new deal of the cards, making the cards look better (bigger) ) if they will fit on the table.
                 								 $(this).css("height", cardHeight );
           						        });
           						        */
                //  alert("new card there?")
       // Animation complete.
  });
    
   //   $('#spades').append('<img style="transform: rotate('+rotateDegrees+'deg)"id="cardPos'+ cardPosition +'"  class="card" src="'+relativeFolder+cardImage+'" ></img>' );
    
    
    }


                if(suit == "clubs"){    
      cardDiv.animate({left: left, top:top},  animateSpeed, function() { 

                   $('#clubs').append('<img style="transform: rotate('+rotateDegrees+'deg)"  id="cardPos'+cardPosition+'"  class="card" src="'+relativeFolder+cardImage+'" ></img>' );
                               $('#clubs .placeholder').remove();
       									if(longestSuitLength<9)   { 
       									    //  $('.card').css('height','220');  
       									}  
                                 else {
                                     //         	$('.card').css('height','200');
                                  } ; 


/*

         										 $(".card").each(function () {                            // this will run with each new deal of the cards, making the cards look better (bigger) ) if they will fit on the table.
                 								 $(this).css("height", cardHeight );
           						        });
           						        */
                //  alert("new card there?")
       // Animation complete.
  });
    
   //   $('#spades').append('<img style="transform: rotate('+rotateDegrees+'deg)"id="cardPos'+ cardPosition +'"  class="card" src="'+relativeFolder+cardImage+'" ></img>' );
    
    
    }
/*
       var cardDiv = $("#animateCardDiv");
        cardDiv.animate({left: fromLeft, top: fromTop}, 100);
      cardDiv.animate({opacity: 1.0}, "fast");              // show the card   
      console.log("moving the card to  " + top + " and from Left " + left);
       
      cardDiv.animate({left: left, top:top}, 100, function() {
     
                   $('#spades').append('<img id="cardPos1"  class="card" src="'+relativeFolder+cardImage+'" ></img>' );
                   alert("new card there?")
       // Animation complete.
  });
      */


       cardDiv.animate({opacity: 0.0}, 50 );  

      
    }  // end of fucntion deal1Card
    
    
    
/***************************/    
    
       
    function placeCard(fromTop,fromLeft){
    

  
  //  alert("callback to palce card");
    
    
    }
    
    function resetCard(fromTop,fromLeft){

 //     $( "#animateCard" ).remove();
 
        console.log('putting the card back on the deck   ...' + fromTop   + ' and left of .. '+fromLeft  ); 

        var cardDiv = $("#animateCardDiv");
 
  
 //   alert( $( cardDiv ).css("top") )

  //  console.log("card should be  back on the pile which should be at position fromTop" + fromTop + " and from Left " + fromLeft);
   
   
             cardDiv.css("opacity", "0.0");      
             cardDiv.css("top", fromTop);
              cardDiv.css("left", fromLeft);
              
                   console.log("card should be  back on the pile which should be at position fromTop" + fromTop + " and from Left " + fromLeft);
                   
            //            $('#spades').append('<img style="transform: rotate('+rotateDegrees+'deg)"id="cardPos'+ cardPosition +'"  class="card" src="'+relativeFolder+cardImage+'" ></img>' ); 
         
    //     debugger;     
   //    $("#animateCardDiv").append('<img id="animateCard" class="deck" style="opacity:1.0; position: absolute; z-index: 13; top: '+fromTop+'px; display: grid; left: '+fromLeft+'px;" src="images/playingCards/PNG-cards-1.3/8cEbeEMLi.png" >');
      
    }  // emd pf reset Card
       
function getPlayForSelectedChord(selectedNote,selectedChord) {    // there is a globalv for the NotesObject)

   
    var dealer="";
                                    


    
    var noteCounter = 0;
    $(NotesObject).find('note').each(function(){
    
    
      $("#welcome").css("display","none");
      $("#answers").css("display","none");
      $("#chordQuestion").css("display","block");
             noteCounter++;
             if(noteCounter == selectedNote){
        //        alert('found the selected note in getPlayForSelectedChord ' + selectedNote + "and the chord is "+ selectedChord );
                var $note = $(this);
                var noteName = $note.attr('title');
               var chordCounter = 0; 
               
              var inversionNum = Math.floor(Math.random() * (2 - 0 + 0)) + 0;
 
 
 // inversionNum = 0 ;  // temporary for testing...ROOT
 
              let inversionNumText = inversionNum.toString();
              var inversionText =  "inversion" + inversionNumText;
              
       //     alert('1239  the inversion number determined randomly is ' + inversionText )
               
                
               $($note).find('chord').each(function(){
                         chordCounter++;
                         if(chordCounter == selectedChord){
                         
                         var $chord = $(this);
                         var chordTitle = $chord.attr('title'); 
                         var chordList = document.getElementById("chord");   
 
                          var chordName = $chord.find('chordName').text();
                          chordName = chordName.trim();
                          
                           
                          
                          var writtenAs = $chord.find('writtenAs').text();
                          writtenAs = writtenAs.trim();
                          
                          
                          
                          $("#chordName").html(chordName );  
                          $("#chordChosen").html(chordName ); 
                          
                          
                            $("#writtenAs").html(writtenAs );  
                          // $("#inversion").html(inversionText );  
 
                  //   alert('1246 found the selected chord in getPlayForSelectedChord and the chord selected is ' + chordTitle );
                      
                          var trebleGraphic = $chord.find('inversion0').text(); 
                //          alert('1254 this is the first find of inversion 0 ROOT text' + trebleGraphic  )
                          
                          var inversionCounter = 0;
                     //       $($chord).find('inversion0').each(function(){  
                            
                            $($chord).find(inversionText).each(function(){  
                                           
                                           
                                  inversionCounter++;
                                   var $inversion = $(this);
                                   var inversionName = $inversion.attr('title'); 
                                   inversionName = inversionName.trim();
                                   $("#inversion").html(inversionName);  
                                   
                                   
                                   var chordTitle = $chord.attr('title'); 
                                   var trebleGraphic= $inversion.find('treble').text();
                                   trebleGraphic = trebleGraphic.trim()
                                   var bassGraphic= $inversion.find('bass').text();
                                   bassGraphic = bassGraphic.trim();
                                   var fingeringGraphic= $inversion.find('fingering').text();
                                   fingeringGraphic = fingeringGraphic.trim();
                                   
                                   var Image_Id = document.getElementById('fingeringImg');
                          
                                    var chordPath = $chord.attr('chordPath');    // overwrite if in xml
                                     if(chordPath == undefined){
 // alert("1310 chordPath not found, set to chordName of " +  chordName   ) ;                                    
                                             chordPath = chordName;
                                            
                                     }   else{
                                     
                                     chordPath = chordPath.trim();
                                     
                                     }     // else we found the chordPath in the xml
                            
                            
                    //        images/Chords/A Chords/A Major/a-major-1st-inversion-on-piano-keyboard.png
                            
                          //          var imagePath =  "images/Chords/";
                                    
        var displayImage =  imagePath +noteName+" Chords/"+chordPath+"/"+fingeringGraphic ;
 // alert('1275 The fingering image path is found at  ' +  displayImage)
                                    // $("#highCardCorrect").append(correct)  } else{ $("#highCardCorrect").append(incorrect)};
                                    Image_Id.src = displayImage;
                                    
Image_Id = document.getElementById('bassImg');  
displayImage =  imagePath +noteName+" Chords/"+chordPath+"/"+bassGraphic ;                                  
                                     Image_Id.src = displayImage;
                                     
                                     Image_Id = document.getElementById('trebleImg');  
displayImage =  imagePath +noteName+" Chords/"+chordPath+"/"+trebleGraphic ;                                  
                                     Image_Id.src = displayImage;
                                    
                                //   var inversionName = "Root Position"

                            });    // for each inversionX  where X is 1, 2, or 3
                                         
                            if(inversionCounter== 0){
                                  alert('1267 error - Could not find the inversion data');
                            } 
                      
                             
/*                             
                             var bidCounter = 0;
                             $($chord).find('bid').each(function(){
                                  bidCounter++;
                                  
                                  var $bid = $(this);
                                  var bidTitle = $bid.attr('title');  
                                  var bidPosition = $bid.find('position').text();  
                                 
                                   var bidPass = $bid.find('pass').text();  
                                   
                          //         newRowContent = "<tr><td>" + bidPosition + " </td><td>Pass</td></tr> ";
                                   if(bidPass.trim()=="Yes"){
                                        newRowContent = "<tr><td>"+bidPosition+"</td><td>Pass</td></tr>";
                                        $("#bids tbody").append(newRowContent);
                                   }else{
                                     var bidLevel = $bid.find('level').text();  
                        
                                     var bidSuitText = $bid.find('suit').text();  
                                     var bidSuit = bidSuitText.trim();
                                     
                                     nextBidSuitShouldBe = bidSuit;  // put it in a global variable



                        
                                     if(bidSuit == "Hearts"){bidSuit = '<img style="height: 20px;" src="'+imagePath + 'heartSuit.png"'};
                                     if(bidSuit == "Spades"){bidSuit = '<img style="height: 20px;" src="'+imagePath + 'spadeSuit.png"'}
                                     if(bidSuit == "Diamonds"){bidSuit = '<img style="height: 20px;" src="'+imagePath + 'diamondSuit.png"'}
                                     if(bidSuit == "Clubs"){bidSuit = '<img style="height: 20px;" src="'+imagePath + 'clubSuit.png"'}
                                     if(bidSuit == "No Trump"){bidSuit = 'NT'  }
                                     if(bidSuit == "?"){  
                                             newRowContent = "<tr><td>"+bidPosition+"</td><td><div id='replaceLevel'>"+ bidLevel + "</div><div id='replaceSuit'>" +  bidSuit + "</div> </td></tr>";
                                     }else{
                                     
                                                                           newRowContent = "<tr><td>"+bidPosition+"</td><td>" +bidLevel +  bidSuit + " </td></tr>";
                                     }
                                     

                                      $("#bids tbody").append(newRowContent);
           
                                   }  
                                 });      // for each bid
 */
          //         balancedHand = $chord.find('balanced').text().trim();
          //          hcp = $chord.find('hcp').text();
          //         distribution = $chord.find('distribution').text();
           //         dummyPoints = $chord.find('dummyPoints').text().trim();;
 /*
               if(dummyPoints ){      // there is a value for dummy pionts
                               $("#distribution").hide();
                               $("#dummyPoints").show();
                    } else{
                                $("#distribution").show();
                               $("#dummyPoints").hide();
                    
                    }                                   
                                    
                   nextBidPosition = $chord.find('positionNext').text();
                    nextBidLevel = $chord.find('levelNext').text().trim();
*/        
// console.log(nextBidPosition )                    
/*            
                          $("#BidTurn").html(nextBidPosition );  
                    
                   nextBidLevelShouldBe = nextBidLevel;  // put it in a global variable
                                            
                                            
                    nextBidText = $chord.find('suitNext').text();

                                     var bidSuit = nextBidText.trim();


                                     nextBidSuitShouldBe = bidSuit;  // put it in a global variable


                                     if(bidSuit == "Hearts"){nextBidSuit = '<img style="height: 20px;" src="'+imagePath + 'heartSuit.png"'}
                                     else if(bidSuit == "Spades"){nextBidSuit = '<img style="height: 20px;" src="'+imagePath + 'spadeSuit.png"'}
                                     else if(bidSuit == "Diamonds"){nextBidSuit = '<img style="height: 20px;" src="'+imagePath + 'diamondSuit.png"'}
                                     else if(bidSuit == "Clubs"){nextBidSuit = '<img style="height: 20px;" src="'+imagePath + 'clubSuit.png"'}
                                     else if(bidSuit == "No Trump"){nextBidSuit = "NT"}
                                       else{nextBidSuit = bidSuit};
    */                                    
          //            explanation = $chord.find('explanation').text();
                      
           //           explanationPart1 = $chord.find('explanationpart1').text();

                                          
             //         explanationPart2 = $chord.find('explanationpart2').text();
                                                              
             //         explanationPart3 = $chord.find('explanationpart3').text();
                      
                
                      
 // alert ('this is the 3d part ' + explanationPart3);
//  alert(' 685 The next bid for  chorde '+ selectedChord  + 'should be ... ' +nextBidPosition +  " " + nextBidLevel + " " + nextBidSuit + " " + hcp)
                     return false;            // breaks the each chord. We processed the one selected
                    }    // end if 
     
                  });    // for each chord
                  
                    return false;            // breaks the each Note. We processed the one selected
        }  // end if noteCounter == selectedNote

    });   // for each note
    
    
    // put all the play data onto the playing board
   
 

 }         // end of parseXml function

 


function parseXmlForNotes()   {        // this function is called up on the successful return of the Ajax call for the xml file that contains the node data (ie: employees or positions )

   
    var note="";
    var dealer="";
    var noteCounter = 0;

    $(NotesObject).find('note').each(function(){         // add each note found in the XML to the notes select picklist as options
 
               var $note = $(this);
                 noteCounter++;
               var NoteTitle = $note.attr('title');
               var notesList = document.getElementById("note");
               var option = document.createElement("option");
              option.text = NoteTitle;
              option.value = noteCounter;
              notesList.add(option);
              
           //    alert(' 1415 Another note found in the xml.  Note Title is '+ NoteTitle); 
    //        if(document.getElementById('radioRandom').checked) {
       //         $("#chordQuestion").css("display","inline-block");
          //      $("#welcome").css("display","none");
                
                
                
       //     }else{
        //          $("#chordQuestion").css("display","none");
        //          $("#welcome").css("display","inline-block");
        //    }
    });   // for each note

 }         // end of parseXml function




let touchstartX = 0
let touchendX = 0
    
function checkDirection() {
  if (touchendX < touchstartX && x  < -200) {swipeLeft()
  }
  if (touchendX > touchstartX && x > 200 ) {swipeRight()
  }
}

document.addEventListener('touchstart', e => {
  touchstartX = e.changedTouches[0].screenX
})

document.addEventListener('touchend', e => {
  touchendX = e.changedTouches[0].screenX
  checkDirection()
})



function swipeRight(){   // user indicated chord was correct

            var x = document.getElementById("welcome");
            if (window.getComputedStyle(x).display === "none") {   ///not the welcome screen displayed

            //  incorrectCount = incorrectCount+1;
              correctCount = correctCount +1;
              playedCount = playedCount+1;
              
       //       alert('1490 correct count is ' + correctCount);
       //       $("#chordChosen").html(chordName ); 
              
              
                $("#correctCount").html(correctCount);
               $("#playedCount").html(playedCount);
               determineNextChordTypeAndShow();
            }
              
               
}

function swipeLeft(){ // user indicated chord was incorrect or too slow


            var x = document.getElementById("welcome");
            if (window.getComputedStyle(x).display === "none") {   ///not the welcome screen displayed

           
           
              incorrectCount = incorrectCount+1;
                             $("#incorrectCount").html(incorrectCount);
              // correctCount = correctCount +1;
              playedCount = playedCount+1;
     
               $("#playedCount").html(playedCount);
               determineNextChordTypeAndShow();
             }
   
}


function clickOnWelcome(){
                                     $("#redArrowLeft").show();
                                     $("#greenArrowRight").show();
                                     $("#welcome").hide();
                                     determineNextChordTypeAndShow()

   }                                  

function determineNextChordTypeAndShow(){   // next in series or random ?



            if(document.getElementById('radioRandom').checked) {
                
                 getRandomChord()
                 

            }else{
                getNextChord()
            }
}




function getNextChord(){
// xxx         $("#animateCardDiv").stop(1,1);               // stop any previous animations  .. the 1 and 1 parameters means "stop all" and "go to end" (of the animations queue)




       var currentChord = document.getElementById("chord").value;   // this will return the number of the exercies selected but includes 1 extra for "Select and exercies"
    
       var nextChord  = Number(currentChord) + 1;
   
       var totalOptions = $('#chord option').length ;   // will return the total number of options.  But this includes the "Seledt..." option 
       
       
     //        alert('before thie ifthenelseThe nextChord is '+ nextChord + ' and the total options is '+ totalOptions)
             
             
       if(nextChord == totalOptions ){   // We already incremented the number to get the nextChord .  Total Options includes the Select... optoin,    So, if they are equal then this is the  last chord ...
       

             
             // Later, we will update this code to go to the next note and the first exercies in that note
             
               
                  var nextNote = 1;
                  var totalNotes = $('#note option').length;   // will return the total number of options PLUS 1 (for the Select...).   
                  
                  if(selectedNote !=  totalNotes - 1 ){            // we are at the last exertcies of the Note.  Move on to the next Note.
         
                   alert('There are no more chords in this note.  Moving on to the next Note...');
                          var nextChord  = 1;
                          selectedNote = Number(selectedNote) + 1;
                          $("#note").val(selectedNote);         // select the randomly chosen note from the picklist
                           selectNote();
                  // We are at the last chord of the last note, start all over again.
                           }else{
                            alert('There are no more chords in this note.  And you completed the last Note in this series.  Going back to Note #1 ...');
                            selectedNote = 1;
                             $("#note").val(selectedNote);         // select the randomly chosen note from the picklist
                               selectNote();
                            nextChord = 1;
                           }
                  
       }else{   // there are more options here in this exercies
 

           //  $("#chord").val(nextChord);

       }
       
       $("#chord").val(nextChord);         // select the randomly chosen note from the picklist
    //   alert('After if then else ...  he nextChord is '+ nextChord + ' and the total options is '+ totalOptions + ' and the seelected note is ' +selectedNote )
 
        selectChord(selectedNote)   // ntote the selected note is global.
        


}  // end function getNextChord


function getRandomChord(){

// window.scrollTo(0,0);
 var totalNotes= $('#note option').length - 1;  // this will return the number of notes selected but includes 1 extra for "Select and exercies"
 
nextNote = 1 + Math.floor(Math.random() * totalNotes);     // randomly select the next note into the global varibale

$("#note").val(nextNote);         // select the randomly chosen note from the picklist

// alert('randomly picklist note '+nextNote)
selectedNote=selectNote()                          // clear the interface and then populate that available chords
 
 
 var totalChords = $('#chord option').length - 1;   // this will return the number of the exercies, for the new note, but includes 1 extra for "Select and exercies"

 
var nextChord = 1 + Math.floor(Math.random() * totalChords);

$("#chord").val(nextChord);         // select the randomly chosen note from the picklist


// alert('in selectChord the chord selected is ' + nextChord);


selectChord(selectedNote);          // ntote the selected note is global.  Go play the cards for this randomly selected chord

}  // end function getRandomChord


 function getNotesXML(){       // make the Ajax call to go read the XML of all notes and all  other data

 

  
     var xmlDataSource =  "Chords.xml";
     

  //   var xmlDataSource =  "http://localhost/~colin_houghton/Bridge/Chords.xml";
  //      alert(   "getting xml file named  " +xmlDataSource );
        
   var settings = {
          'cache': false,
          'dataType': "xml",
          "async": true,
          "crossDomain": true,
          "url":  xmlDataSource,
          "method": "GET",
           "type": "GET",
                          "error": function (e) {
                         alert("An error occurred while processing the file: " +xmlDataSource  + " and the returncode is " + e);
                          console.log("XML reading Failed: ", e);
                 },
          "success":  createNotesXml
      
   
      }
 

 
     $xmlBack = $.ajax(settings).done(function (response) {
          console.log(response);
   //   alert('the response is' + response)
      //        console.log('Here is the entire xml that was read ..' + $(response).text());


    });
    
      
 };   // end of getNotesXML
             

function updateChordList(noteNumber){

    var noteCounter = 0;
    var chordCounter = 0; 
    var chordList = document.getElementById("chord");
    
    
    // clear out all existing options from last choice of a Note
    
    $('#chord')
    .find('option')
    .remove()
    .end()

 //  alert('1560 trying to find chords bot noteNumber ' + noteNumber)
   
    var option = document.createElement("option");
                               option.text = "Select an Chord";
                               option.value = chordCounter;
                               chordList.add(option);

             $(NotesObject).find('note').each(function(){
    

                var $note = $(this);
                 noteCounter++;


              if(noteCounter == noteNumber){
              
                      //    alert("match for  " + noteNumber + $note.text())

                     $($note).find('chord').each(function(){
                         chordCounter++;
                         var $chord = $(this);
                         var chordTitle = $chord.attr('title'); 
                         var chordList = document.getElementById("chord");
                         var option = document.createElement("option");
                               option.text = chordTitle;
                               option.value = chordCounter;
                               chordList.add(option);
                               
                              //  alert('Another chord found in the xml.  Chord Title is '+ chordTitle); 
    
                   });         // for each chord
                   
                          return false; // breaks
                   
              }; // end if note found     
              
       
     
         });         // for each note



}   // end of function  updateChordList(noteNumber


function updateInversionList(noteNumber){

    var noteCounter = 0;
    var chordCounter = 0; 
    var chordList = document.getElementById("chord");
    
    
    // clear out all existing options from last choice of a Note
    
    $('#chord')
    .find('option')
    .remove()
    .end()

   
    var option = document.createElement("option");
                               option.text = "Select an Chord";
                               option.value = chordCounter;
                               chordList.add(option);

             $(NotesObject).find('note').each(function(){
    

                var $note = $(this);
                 noteCounter++;


              if(noteCounter == noteNumber){
              
                      //    alert("match for  " + noteNumber + $note.text())

                     $($note).find('chord').each(function(){
                         chordCounter++;
                         var $chord = $(this);
                         var chordTitle = $chord.attr('title'); 
                         var chordList = document.getElementById("chord");
                         var option = document.createElement("option");
                               option.text = chordTitle;
                               option.value = chordCounter;
                               chordList.add(option);
    
                   });         // for each chord
                   
                          return false; // breaks
                   
              }; // end if note found     
              
       
     
         });         // for each note



}   // end of function  updateChordList(noteNumber



function clearPlayedCards(){

/*

      $("#spades").css("display","none");
            $("#hearts").css("display","none");
                  $("#diamonds").css("display","none");
                        $("#clubs").css("display","none");
                        
                        */

}  // end of  function clearPlayedCards

function showPlayedCards(){

    //  $("#spades").css("display","block");
    //        $("#hearts").css("display","block");
    //              $("#diamonds").css("display","block");
    //                    $("#clubs").css("display","block");
                        
                        
}  // end of  function showPlayedCards


function selectNote(){

 
 
  //$("#welcome").remove();
  //$("#startup").remove();
 
 
  var noteSelected = document.getElementById("note").value;   // this will return the number of the note selected
 

      //   $("#bids > tbody").empty();
      
     /*  
      // First clear all the cards from the last chord/note.
        $('.card').each(function(i){
        
               this.src="images/playingCards/PNG-cards-1.3/seeThrough.png";
       
      });
      */
      

      /*
                             $('#spades').empty();
                             $('#hearts').empty();
                             $('#diamonds').empty();
                             $('#clubs').empty();
                             
                             $('#spades').append(   '  <img id="cardPos1" class="card placeholder" name="placholder"  src="images/playingCards/PNG-cards-1.3/seeThrough.png" /> ' );
                             $('#hearts').append(   '  <img id="cardPos1" class="card placeholder" name="placholder" src="images/playingCards/PNG-cards-1.3/seeThrough.png" /> ' );
                             $('#diamonds').append(   '  <img id="cardPos1" class="card placeholder" name="placholder" src="images/playingCards/PNG-cards-1.3/seeThrough.png" /> ' );
                             $('#clubs').append(   '  <img id="cardPos1" class="card placeholder" name="placholder"  src="images/playingCards/PNG-cards-1.3/seeThrough.png" /> ' );
       */
          //  resetAnimateCard();
 

              
       
      
   //   clearTheAnswers();       // clear any answers from the previous chord
    /*  $("#questions").hide();
            $("#bidsArea").hide();
            
            */
     updateChordList(noteSelected);
     
 // alert('wer are bakc ')
     return(noteSelected);
   
  
}   // end of selectNote


function resetAnimateCard(){

         const dealStart= document.getElementById("deckCard");
         var rectFrom = dealStart.getBoundingClientRect();
         
         
          	$("#animateCardDiv").stop(1,1);               // stop any previous animations  .. the 1 and 1 parameters means "stop all" and "go to end" (of the animations queue)
           $("#animateCardDiv").css("top",rectFrom.top);           
           $("#animateCardDiv").css("left",rectFrom.left);  
           $("#animateCardDiv").css("opacity",1.0);
}
/*
function  updateHand(note,chord){

 alert(  "You selected note " + note + " and chord " + chord );  
 
 
       // First clear all the cards  
        $('.card').each(function(i){
        
               this.src="images/playingCards/PNG-cards-1.3/seeThrough.png";
       
      });
      
  
}
 */
 
 
 function  setReplaceSuit(){
 
       var bidSuit = document.getElementById("bidSuit").value.trim();   // this will return the number of the note selected
       
                                            if(bidSuit == "Hearts"){replaceBidSuit = '&nbsp;<img style="height: 20px;" src="'+imagePath + 'heartSuit.png"' + '</img>'  }
                                     else if(bidSuit == "Spades"){replaceBidSuit = '&nbsp;<img style="height: 20px;" src="'+imagePath + 'spadeSuit.png"   ' + '</img>'}
                                     else if(bidSuit == "Diamonds"){replaceBidSuit = '&nbsp;<img style="height: 20px;" src="'+imagePath + 'diamondSuit.png"' + '</img>'}
                                     else if(bidSuit == "Clubs"){replaceBidSuit = '&nbsp;<img style="height: 20px;" src="'+imagePath + 'clubSuit.png"' + '</img>'}
                                     else if(bidSuit == "No Trump"){replaceBidSuit = "&nbsp;NT"}
                                        else if(bidSuit == "Select ..."){replaceBidSuit = "&nbsp;?"}
                                       else{nextBidSuit = bidSuit};
                                     
                                               
    //    nextBidSuit =    "&nbsp;" + nextBidSuit + "</img>"   ;                         
                                       
       $("#replaceSuit").html(replaceBidSuit);
 
 }
 
 function checkForPassOrDouble(){     //  show or hid bid suite if the user selected PASS or not
 
      var bidLevel = document.getElementById("bidLevel").value.trim();   // this will return the number of the note selected
      
       if(bidLevel == "Select ...")   {
          bidLevel = "? "}   
      $("#replaceLevel").html(bidLevel);

      if(bidLevel == "Pass" || bidLevel == "Double"){
              $("#bidSuit").css("display","none");
          
        //      $("#bidSuit option:eq(SelectDummy)").prop("selected", true);
        
              $("#replaceSuit").html(" "); 
              
                $("#bidSuit option").prop("selected", false);   // change the bid suite to "Selected..." because if the user goes back and forth between a suite and adouble or a pass, we want the suit to be null, or it may tell the user there is an error.
                    // For example, without this code, if the answer was "Double", but the user first put in 1 Spades, pressed CHECK YOUR ANSWERS, then set it to Double and again pressed CHECK YOUR ANSWERS
                    // then the system would throw an error because it would think the person was saying "DOUBLE SPADES".  So we remove the "Spades" to ensure this does not happen.
              
    //          $('#bidSuit  option:eq(SelectDummy)').attr('selected', 'selected')
              
              
      }else{
                    $("#bidSuit").css("display","inline-block");
      }
 

 }       // end of checkForPassOrDouble }
 
 function clearTheAnswers(){
 


//    $("#bids > tbody").empty();
 
 //    $("#correctAnswerSummary").empty();
     
    
  //   $("#nextChordButton").css("display","none");
 //        $("#randomButton2").css("display","none");
 
            
//      $("#explanationPart1").empty();
//      $("#explanationPart2").empty();
 //     $("#explanationPart3").empty();
 //     $("#hcp").val("");
 //     $("#dist").val("");
 //     $("#dummy").val("");
      
  //    $("#radioYes").prop('checked', false);
  //    $("#radioNo").prop('checked', false);
      
 //     $("#bidLevel option").prop("selected", false);
  //    $("#bidSuit option").prop("selected", false);
    //  $("#questions").show();
      
//      $(".correctCheck").empty();
 //     $("#bidSuit").css("display","inline-block");
  //     $("#correctAnswer").css("display","none");
 
           
}    // end funciton clearTheAnswers

function selectChord(selectedNote){
 
     var chord = document.getElementById("chord").value;   // this will return the number of the chord selected
   
   /*
   $('.grid-container').css('height','520px');   // change the default to now handle a maximum of 6 cards per suit.
                                $('#spades').empty();
                             $('#hearts').empty();
                             $('#diamonds').empty();
                             $('#clubs').empty();
                             
                             $('#spades').append(   '  <img id="cardPos1" class="card placeholder" name="placholder"  src="images/playingCards/PNG-cards-1.3/seeThrough.png" /> ' );
                             $('#hearts').append(   '  <img id="cardPos1" class="card placeholder" name="placholder" src="images/playingCards/PNG-cards-1.3/seeThrough.png" /> ' );
                             $('#diamonds').append(   '  <img id="cardPos1" class="card placeholder" name="placholder" src="images/playingCards/PNG-cards-1.3/seeThrough.png" /> ' );
                             $('#clubs').append(   '  <img id="cardPos1" class="card placeholder" name="placholder"  src="images/playingCards/PNG-cards-1.3/seeThrough.png" /> ' );
                             
                             $("#animateCardDiv").stop(1,1);               // stop any previous animations  .. the 1 and 1 parameters means "stop all" and "go to end" (of the animations queue)
                              resetAnimateCard();
    //   clear all the previous chord answers and data
   */
  //   clearTheAnswers();       // clear any answers from the previous chord
    // $("#questions").hide();
    //       $("#bidsArea").hide();
    //  clearPlayedCards();
    //                             $("#correctAnswer").show();
      if(chord > 0 ){   // if this is NOT the "Select and Chord .. " optoin then
                // $("#questions").show();
                //  $("#bidsArea").show();
            // 
            //    showPlayedCards();
            
                getPlayForSelectedChord(selectedNote,chord);          // show the cards and bids for the selected chord

      }    
      else{
      
            $("#answers").css("display","none");
            $("#chordQuestion").css("display","none");
            $("#welcome").css("display","inline-block");
      }

}



function StartOver(){


            $("#answers").css("display","none");

                                     $("#redArrowLeft").hide();
                                     $("#greenArrowRight").hide();
            
            if(document.getElementById('radioRandom').checked) {
                $("#chordQuestion").css("display","none");
                $("#welcome").css("display","inline-block");
                

                
            }else{
                  $("#chordQuestion").css("display","none");
                  $("#welcome").css("display","inline-block");
            }
            
            selectedNote = 0;
            
             incorrectCount = 0;   // global var
              correctCount = 0;
              playedCount = 0;
             $("#incorrectCount").html(correctCount);        
             $("#correctCount").html(correctCount);
               $("#playedCount").html(playedCount);
               
               
}

function showCorrectAnswer(){

               // alert('1925 now swapping images');


            $("#answers").css("display","inline-block");
            $("#chordQuestion").css("display","none");
            $("#welcome").css("display","none");
            

    //        $(".correctCheck").empty();
  //          var correct = '<img class="correctCheck" src="' + imagePath + 'greenCheck.png" />';
  //          var incorrect = '<img class="correctCheck" src="' + imagePath + 'redWrongX.png" />';
            
            
   //         if(    $('#hcp').val() == hcp)    {   $("#highCardCorrect").append(correct)  } else{ $("#highCardCorrect").append(incorrect)};

    //        var balancedRadio = $("#formQuestions input[type='radio']:checked").val();
            
     //       alert( "the correct balanced hand answer is .. "  + balancedHand + " and the radio button was set to " + balancedRadio );
            
      
//   alert(           $('input[name=balanced]:checked', '#formQuestions').val()           ); 
 

        
        
     //       if(  balancedHand == balancedRadio  )  {   $("#balancedHandCorrect").append(correct)  }else{ $("#balancedHandCorrect").append(incorrect)};
            
      //      var thisBidSuit = "";

   // alert("the value found is  " + $('#bidSuit').val()  )
      //      if (  $('#bidSuit').val() == 'Select ...') {

//  alert("so we do notherin becaues thisBuid suit is " + thisBidSuit)
     //       } 
     //       else{
     //          thisBidSuit = $('#bidSuit').val();
     //       }
            
            
            
//  alert(  $('#bidLevel').val()  + " was the bid level "  +  nextBidLevelShouldBe + " was what it should be " + $('#bidSuit').val() + " is the suit bid  and it should be " + nextBidSuitShouldBe + "and thisBidSuit is " +  thisBidSuit);
/*
            if(    $('#bidLevel').val() == nextBidLevelShouldBe  &&  thisBidSuit == nextBidSuitShouldBe)    {   $("#bidCorrect").append(correct)  }else{ $("#bidCorrect").append(incorrect)};

                       
                    if(dummyPoints){      // there is a value for dummy pionts
                    
                              if(    $('#dummy').val() == dummyPoints)    {   $("#dummyCorrect").append(correct)  } else{ $("#dummyCorrect").append(incorrect)};
                              $("#correctAnswerSummary").html('Balanced hand? ' + balancedHand + '<p /> There are ' +hcp+' high card points and '+ dummyPoints+' dummy points. <p />Therefore, the next bid  by  ' +nextBidPosition +  " should be <b> " + nextBidLevel + "" + nextBidSuit + '</b>. <p />');
                    } else{
                    
                                 if(    $('#dist').val() == distribution)    {   $("#distributionCorrect").append(correct)  } else{ $("#distributionCorrect").append(incorrect)};
                    
                                $("#correctAnswerSummary").html('Balanced hand? ' + balancedHand + '<p /> There are ' +hcp+' high card points and '+ distribution+' distribution points. <p />Therefore, the next bid  by  ' +nextBidPosition +  " should be <b> " + nextBidLevel + "" + nextBidSuit + '</b>. <p />');
                    }     

             $("#explanationPart1").html(explanationPart1);
             $("#explanationPart2").html(explanationPart2);       
             $("#explanationPart3").html(explanationPart3);
     */        

   
}   

/*
function placeAnimateCardOverDeckCard(){



         const dealStart= document.getElementById("deckCard");
         var rectFrom = dealStart.getBoundingClientRect();
         
       console.log(" putting the animate card in place "  );
          
          $("#animateCardDiv").css("opacity","1.0");
          $("#animateCardDiv").css("top",rectFrom.top);
          $("#animateCardDiv").css("left",rectFrom.left);

          
     //    deal1Card(rectFrom.top, rectFrom.left, rect.top + 10 , rect.left + 10  )

}
*/

// Function to save a 2D array in a cookie (written by Chat GPT)
function saveArrayInCookie(array, cookieName) {
  // Convert the array to a string
  var arrayString = JSON.stringify(array);
  
  // Set the cookie with the given name and the array string
  document.cookie = cookieName + "=" + arrayString + "; expires=Thu, 31 Dec 2023 12:00:00 UTC; path=/";
}

// Example usage
// var array = [[1, 2, 3], [4, 5, 6], [7, 8, 9]];
// saveArrayInCookie(array, "myArray");
// document.cookie = "username=John Doe; expires=Thu, 18 Dec 2013 12:00:00 UTC";

// Function to read a 2D array from a cookie  (written by Chat GPT) By default, the cookie belongs to the current page.
function readArrayFromCookie(cookieName) {
  // Get the cookie string
  var cookieString = document.cookie;
  
  // Split the cookie string into individual cookies
  var cookies = cookieString.split("; ");
  
  // Find the cookie with the given name
  for (var i = 0; i < cookies.length; i++) {
    var cookie = cookies[i];
    var cookieParts = cookie.split("=");
    var cookieNamePart = cookieParts[0];
    var cookieValuePart = cookieParts[1];
    
    if (cookieNamePart == cookieName) {
      // Found the cookie with the given name
      // Convert the cookie value (string) back to a 2D array
      return JSON.parse(cookieValuePart);
    }
  }
  
  // Cookie with the given name was not found
  return null;
}

// Example usage
var array = readArrayFromCookie("myArray");
console.log(array);





$(document).ready(function () {

    //   window.scrollTo(0,0);   // scroll to the top so that when the card's get dealt, that the absolute position of the placehodler card is where it should be
 //        $('html, body').animate({
 //       scrollTop: $("#mainpage").offset().top
 //   }, 10);
                        //        $("#questions ").hide();
                                
                                     $("#answers").hide();
                                     $("#redArrowLeft").hide();
                                     $("#greenArrowRight").hide();
                        //        $("#bidsArea ").hide();
                        //        $("#distribution").show();
                        //       $("#dummyPoints").hide();
                                $("#nextChordButton").css("display","none");
                               $("#randomButton2").css("display","none");
                         //       $("#correctAnswer").hide();
                         //       placeAnimateCardOverDeckCard();
                         //       if ($(window).width() <= 1024) {
     //									 $("#deck").hide();
           //                     }
 
 // alert('end of startup...now reading the notes xml');
                              getNotesXML();     // this will read the XML and, when the AJAX async call is finished, will go get all the Notes and populate them in the picklist, ready for selection by the end user



    }); 
   
   
   
   
   
   
</script>
   

  
<!-- This is the end of the document.read function -->  


</head>




<body>


<div id="mainpage" style="display:">
 


<div style="display:flex; width:100%;background-color: pink">
    <div id="NoteID" class="noteID" >
    
        		

	             
	             
	              <div id="startOverButtonDiv">
				        <button type="button"  id="startOverButton"   style="width :100%; margin-bottom:5px" onclick="StartOver()">Click Here to Start Over ...</button>
				    </div>
				    
				    	             <div style="  float:left;">

				    
	                 <div style="  padding-bottom: 8px">
	        			         <input type="radio"  id="radioRandom" value="Random" name="isRandom" style="width: 30px;"  checked="checked">Random Chord</input>
	        			  </div>
	        			  
	        			  
	        			  <div style="  padding-bottom: 8px">
	        	              <input type="radio" id="radioNote" name="isRandom"  value="Sequence" style="width: 30px;">In Sequence</input>
	        	        </div>
	        	        <BR />

	     
	               </div>
	               
	               
	          <div style="  float:left;">
	               	             

	        
				
				
   

				
    				<div id="notePicklist" style="display: inline-block; padding-leftt:100px;">
          Note:
           <select name="note" id="note" style="font-size:inherit;" onchange="selectedNote=selectNote()">
  				
                    <option id="defaultNote" selected>Select a note...</option>
				</select>
				</div>
				<div id="chordPicklistDiv" style="display: inline-block">
				Chord:
				 <select name="chord" id="chord" style="font-size:inherit;" onchange="selectChord(selectedNote);">
                                <option id="defaultChord" selected>Select a chord...</option>
				</select>
				</div>
				
				
<!--				
						<div id="inversionPicklist" style="display: inline-block">
				Inversion:
				 <select name="inversion" id="inversion" style="font-size:inherit;" onchange="selectInversion(selectedNote);">
                                <option id="defaultInversion" selected>Select an inversion...</option>
				</select>
				</div>		
			
			
			-->	
				
				
				
				   </div>
			

    </div>

</div>



<div id="playArea" style="display:block; clear:both; width:100%;  
  background: lightgray;
 text-align:center;  padding-top: 10px; padding-bottom: 10px;
">  


<div style="display:grid; clear:both;  grid-gap:20px; grid-template-columns: 1fr 1fr 1fr; grid-template-columns: auto 298px auto;"> 

<div id="swipeLeft" style="margin-top: 250px; text-align:right" onclick="swipeLeft()">


     <img  id="redArrowLeft" style="width: 30px; height:50px; " class="redArrowLeft" src="images/redLeftArrow.png" /> 

 
</div>

<div id="answers" style="display: none; padding-top:20px; border-radius: 25px; text-align:center; vertical-align:middle; border: 10px solid; width:298px;  height: 600px;  background-color: white">

<div id="chordChosen"  style="font-size: 24px;" >

    Example hard text: A Major
</div>

<div>
<img  id="fingeringImg" style="width: 275px; padding-top: 15px;"   class="deck" src="" />   
 </div>  

<div>
<img  id="trebleImg" style="width: 275px; padding-top: 15px;" class="deck" src="" />
 </div>
 <div>
<img  id="bassImg" style="width: 275px; padding-top: 15px;" class="deck" src="" />   
</div>


</div>


<div id="welcome" onclick="clickOnWelcome();" style="display: inline-block; padding-top:60px; font-size:30px; border-radius: 25px;text-align:center; vertical-align:middle; border: 10px solid; width:298px;  height: 600px;  background-color: white">
  
  
    <div id="welcomeTitle">
     Welcome to FlashChords 0.13
     
     
  </div>
  
  
  <div id="welcomeSecondDiv">
      <div id="tempInstructions2" style="font-size:20px;">
      &nbsp;<p />A chord will display here.  <p />Play it on your piano.
      </div>
  </div>
  
  
  
  
  
    <div id="welcomeThirdDiv" style="font-size: 20px">
    
          <div id="tempInstructions3" style="font-size:14px; text-align:left; margin-left: 10px;">

               
                Swipe right if you played it correctly.  <p />
                Swipe left if you did not play it correctly or <br />
                you played it correctly but your response was not fast enough for
                your own standards.  

         </div>
   </div>
   
       <div id="welcomeFourthDiv" style="font-size: 20px">
    
          <div id="tempInstructions4" style="text-align=center; font-size:14px; font-size:medium; margin-top:50px; margin-left: 10px;">

                Now Click or Tap HERE<br /> to get started. 

         </div>
   </div>
   
   
</div>


<div id="chordQuestion"  onclick="showCorrectAnswer()" style="display: none; padding-top:60px; font-size:30px; border-radius: 25px;text-align:center; vertical-align:middle; border: 10px solid; width:298px;  height: 600px;  background-color: white">
  <div id="chordName">
     
     
  </div>
  
  
  <div id="inversion">
 
  </div>
  
  
  
  
  
    <div id="writtenAs" style="font-size: 20px">
    
 
   </div>
   
    <div id="questionInstructions" style="margin-top:200px; font-size: 20px">
        Then tap here to see the fingering.<p />
        Swipe right if you played it correctly.<p />
        Swipe left if you played it incorrectly.
 
      </div> 

</div>




<div id="swipeRight" style="margin-top: 250px; text-align:left"   onclick="swipeRight(event)">

     <img  id="greenArrowRight" style="width: 30px; height:50px;" class="greenArrowRight" src="images/greenRightArrow.png" /> 
 
</div>
</div>




</div>

<div style="display: block; clear: both;">
<div style="display:grid; clear:both;  background-color: pink; grid-gap:10px; grid-template-columns:  auto auto auto; "> 

    <div id="incorrect"  style="text-align:center" >
           Incorrect count
           <div id="incorrectCount"  style="text-align:center" >
           0
           </div>
          <div id="buttonRedo"  style="text-align:center" >
                <button type="button"  id="redoButton"   style="width :100%; margin-bottom:5px" onclick="RedoIncorrect()">Redo These</button>
           </div>
    </div>

    <div id="totalPlayed"  style="text-align:center" >
           Total Played
                      <div id="playedCount"  style="text-align:center" >
          0
           </div>
    </div>
    
    <div id="correct"  style="text-align:center" >
          Correct Count
         <div id="correctCount"  style="text-align:center" >
            0
           </div>
    </div>
</div>
   </div>
   

   
   </div>

</body>



</HTML></div>
